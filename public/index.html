<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Mapping</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="icon" href="img/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Rancho" rel="stylesheet">
</head>

<body>
    <!--navbar 與搜尋列-->
    <nav>
        <a href="index.html">
            <img src="img/logo-light.png" alt="logo" class="logo">
        </a>
        <form class="">
            <input type="text" name="search" placeholder="城市、地點" class="form-control mr-sm-2">
            <select class="select-bar">
                    <option value="-">-</option>
                    <option value="旅行">旅行</option>
                    <option value="美食">美食</option>
                    <option value="愛情">愛情</option>
                    <option value="心情">心情</option>
                    <option value="公益">公益</option>
                    <option value="親子">親子</option>
                    <option value="朋友">朋友</option>
                </select>
            <input type="submit" value="搜尋" class="search" />
        </form>
        <style type="text/css">
            .nav-right{
                color:white;
                float: right;
            }
            .nav-right img{
                cursor: pointer;
                width: 40px;
                margin-right:10px;
            }
            .nav-right>span{
                vertical-align: top;
                display: inline-block;
                margin-top:16px;
                cursor: pointer;
            }
            .dropdown{
                /*margin:12px;*/
            }
            #Dname{
                vertical-align: top;
            }
            .dropdown-content{
                top:64px;
            }
        </style>
        <!-- <a href="/user.html" class="nav-right" id="Dname"></a> -->
        <!-- <a href="/signin.html" class="nav-right" id="SignIn"></a> -->
        <!-- <a class="nav-link" href="signin.html">登入</a>
        <a class="nav-link" href="signup.html">註冊 </a>  -->
        <div class="dropdown">
            <div class="dropbtn">

                <!-- <a id="Dname"></a> -->
                <a  class="nav-right" id="Dname"></a>
                <a href="/signin.html" class="nav-right" id="SignIn"></a>

            </div>
            <div class="dropdown-content dropMenu">
                <a class="dropdown-item" href="edit.html">新增文章</a>
                <a class="dropdown-item" href="user.html">個人頁面</a>
                <a class="dropdown-item" id="signoutSmtBtn">登出</a>
            </div>
        </div>
    </nav>

    <header>
        <div class="header-text">
            <h1>Mapping</h1>
            <p>用地圖探索城市</p>
            <a href="search.html?kind=Travel" class="big-a">立即探索</a>
        </div>
    </header>

    <article>
        <section class="container intro">
            <div class="row">
                <div class="col-sm-6 col-md-3">
                    <img src="img/icon/map-icon.png" alt="map" class="icons">
                    <h3>地圖</h3>
                    <p>在地圖上點選地標並且閱讀您喜愛的文章</p>
                </div>
                <div class="col-sm-6 col-md-3">
                    <img src="img/icon/culture-icon.png" alt="code" class="icons">
                    <h3>社群</h3>
                    <p>隨時隨地了解親朋好友的最新消息</p>
                </div>
                <div class="col-sm-6 col-md-3">
                    <img src="img/icon/diary-icon.png" alt="code" class="icons">
                    <h3>個人頁面</h3>
                    <p>專屬個人頁面寫下您專屬的地圖日記</p>
                </div>
                <div class="col-sm-6 col-md-3">
                    <img src="img/icon/change-icon.png" alt="code" class="icons">
                    <h3>交流</h3>
                    <p>透過地圖了解當地文化進行深度交流</p>
                </div>
            </div>
        </section>

<!--gary-->
        <section class="hot-issue">
            <div class="container">
                <h2>熱門文章</h2>
                <div class="row">
                    <div class="col-sm-6 col-md-4">
                        <a id="1" href="article.html">
                            <img id='hotImg1' src="./img/food.jpg" alt="hot issue">
                            <h3 id='hotTitle1'>北村豆腐家</h3>
                            <p class="small-text">台北市 </p><p class="small-text" id='hotId1'>邵家怡</p>
                        </a>
                    </div>
                    <div id="2" class="col-sm-6 col-md-4">
                        <a href="article.html">
                            <img id='hotImg2' src="./img/food.jpg" alt="hot issue">
                            <h3 id='hotTitle2'>北村豆腐家</h3>
                            <p class="small-text">台北市 </p><p class="small-text" id='hotId2'>邵家怡</p>
                        </a>
                    </div>
                    <div class="col-sm-6 col-md-4">
                        <a id="3"  href="article.html">
                            <img id='hotImg3' src="./img/food.jpg" alt="hot issue">
                            <h3 id='hotTitle3'>北村豆腐家</h3>
                            <p class="small-text">台北市 </p><p class="small-text" id='hotId3'>邵家怡</p>
                        </a>
                    </div>
                    <div class="col-sm-6 col-md-4">
                        <a id="4"  href="article.html">
                            <img id='hotImg4' src="./img/food.jpg" alt="hot issue">
                            <h3 id='hotTitle4'>北村豆腐家</h3>
                            <p class="small-text">台北市 </p><p class="small-text" id='hotId4'>邵家怡</p>
                        </a>
                    </div>
                    <div class="col-sm-6 col-md-4">
                        <a id="5" href="article.html">
                            <img id='hotImg5' src="./img/food.jpg" alt="hot issue">
                            <h3 id='hotTitle5'>北村豆腐家</h3>
                            <p class="small-text">台北市 </p><p class="small-text" id='hotId5'>邵家怡</p>
                        </a>
                    </div>
                    <div class="col-sm-6 col-md-4">
                        <a id="6"  href="article.html">
                            <img id='hotImg6' src="./img/food.jpg" alt="hot issue">
                            <h3 id='hotTitle6'>北村豆腐家</h3>
                            <p class="small-text">台北市 </p><p class="small-text" id='hotId6'>邵家怡</p>
                        </a>
                    </div>
                </div>
            </div>
        </section>
<!--gary-->

        <section class="container">
            <h2>主要分類</h2>
            <div class="row category">
                <div class="col-sm-6 col-md-3">
                    <a href="search.html">
                        <div class="category-image" data-content="熱門">
                            <img src="./img/category/hot.jpg" alt="熱門">
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-3">
                    <a href="search.html?kind=Travel">
                        <div class="category-image" data-content="旅行">
                            <img src="./img/category/travel.jpg" alt="旅行">
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-3">
                    <a href="search.html?kind=Food">
                        <div class="category-image" data-content="美食">
                            <img src="./img/category/foodie.jpg" alt="美食">
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-3">
                    <a href="search.html?kind=Love">
                        <div class="category-image" data-content="愛情">
                            <img src="./img/category/dating.jpg" alt="愛情">
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-3">
                    <a href="search.html?kind=Mood">
                        <div class="category-image" data-content="心情">
                            <img src="./img/category/mood.jpg" alt="心情">
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-3">
                    <a href="search.html?kind=Charity">
                        <div class="category-image" data-content="公益">
                            <img src="./img/category/help.jpg" alt="公益">
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-3">
                    <a href="search.html?kind=Family">
                        <div class="category-image" data-content="親子">
                            <img src="./img/category/family.jpg" alt="親子">
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-3">
                    <a href="search.html?kind=Friend">
                        <div class="category-image" data-content="朋友">
                            <img src="./img/category/friends.jpg" alt="朋友">
                        </div>
                    </a>
                </div>
            </div>
        </section>

    </article>
    <footer>
    </footer>
</body>
<script src="https://www.gstatic.com/firebasejs/4.1.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCxtNaITKHzASF0PNhcr1mU6ah0Ru7FTqc",
    authDomain: "sna-map-4f1bb.firebaseapp.com",
    databaseURL: "https://sna-map-4f1bb.firebaseio.com",
    projectId: "sna-map-4f1bb",
    storageBucket: "sna-map-4f1bb.appspot.com",
    messagingSenderId: "1022375312771"
  };
  firebase.initializeApp(config);
</script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="js/judgeBar.js"></script>
    <script type="text/javascript" src="js/logout.js"></script>
    <!--gary-->
    <script>
        var username = ["", "", "", "", "", ""];
        var title = ["", "", "", "", "", ""];
        var photo = ["", "", "", "", "", ""];
        var key = ["", "", "", "", "", ""];
        var i = 0;
        var j = 0;
        var k = 0;
        var ref = firebase.database().ref('Post/Food');
        ref.orderByChild('like_count').limitToLast(1).on('child_added', function(snap){
            username[i] = snap.child('username').val();
            title[j] = snap.child('title').val();
            photo[k] = snap.child('p_photo').val();
            key = snap.getKey();
            i++;
            j++;
            k++;
            document.getElementById("hotId1").innerText = username[0];
            document.getElementById("hotTitle1").innerText = title[0];
            document.getElementById("hotImg1").src = photo[0];
            document.getElementById("1").href = "article.html?key="+key;
           
            //console.log(username, title);
            //最後執行
        });
        var ref = firebase.database().ref('Post/Friend');
        ref.orderByChild('like_count').limitToLast(2).on('child_added', function(snap){
            username[i] = snap.child('username').val();
            title[j] = snap.child('title').val();
            photo[k] = snap.child('p_photo').val();
            var key_k = snap.getKey();
            var key = [];
            key.push(key_k);

            i++;
            j++;
            k++;
            document.getElementById("hotId2").innerText = username[1];
            document.getElementById("hotTitle2").innerText = title[1];
            document.getElementById("hotImg2").src = photo[1];
            document.getElementById("hotId3").innerText = username[2];
            document.getElementById("hotTitle3").innerText = title[2];
            document.getElementById("hotImg3").src = photo[2];
            
            document.getElementById("2").href = "article.html?key="+key[0];
             document.getElementById("3").href = "article.html?key="+key[1];

            //console.log(username, title);
            //最後執行
        });
        var ref = firebase.database().ref('Post/Mood');
        ref.orderByChild('like_count').limitToLast(1).on('child_added', function(snap){
            username[i] = snap.child('username').val();
            title[j] = snap.child('title').val();
            photo[k] = snap.child('p_photo').val();
            var key = snap.getKey();
            i++;
            j++;
            k++;
            document.getElementById("hotId4").innerText = username[3];
            document.getElementById("hotTitle4").innerText = title[3];
            document.getElementById("hotImg4").src = photo[3];
            document.getElementById("4").href = "article.html?key="+key;
            //console.log(username, title);
            //最後執行
        });
        var ref = firebase.database().ref('Post/Travel');
        ref.orderByChild('like_count').limitToLast(2).on('child_added', function(snap){
            username[i] = snap.child('username').val();
            title[j] = snap.child('title').val();
            photo[k] = snap.child('p_photo').val();
            var key_k = snap.getKey();
            var key = [];
            key.push(key_k);
            console.log(key);
            i++;
            j++;
            k++;
            document.getElementById("hotId5").innerText = username[4];
            document.getElementById("hotTitle5").innerText = title[4];
            document.getElementById("hotImg5").src = photo[4];
            document.getElementById("hotId6").innerText = username[5];
            document.getElementById("hotTitle6").innerText = title[5];
            document.getElementById("hotImg6").src = photo[5];
            document.getElementById("5").href = "article.html?key=-Km2uf4jiNoEQGXXPyb3";
            document.getElementById("6").href = "article.html?key="+key[0];
            //console.log(username, title);
            //最後執行
        });
    

    </script>
</html>